


<section class="pt-3">
    <div class="container">
        <div class="row">

             
                
            <div class="col-lg-4 col-xl-3">
                 
                <div class="offcanvas-lg offcanvas-end" tabindex="-1" id="offcanvasSidebar" >
                     
                    <div class="offcanvas-header justify-content-end pb-2">
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#offcanvasSidebar" aria-label="Close"></button>
                    </div>

                     
                    <div class="offcanvas-body p-3 p-lg-0">
                        <div class="card bg-light w-100">

                             
                            <div class="position-absolute top-0 end-0 p-3">
                                <a href="#" class="text-primary-hover" data-bs-toggle="tooltip" data-bs-title="Edit profile">
                                    <i class="bi bi-pencil-square"></i>
                                </a>
                            </div>

                             
                            <div class="card-body p-3">
                                 
                                <div class="text-center mb-3">
                                    <div class="avatar avatar-xl mb-2">
                                        <img class="avatar-img rounded-circle border border-2 border-white" src="https://i.ibb.co/TBZWn8qz/profile1.png" alt="">
                                    </div>
                                    <h6 class="mb-0">Admin❤️</h6>
                                    <% if(admin) { %> 
                                    <a href="#" class="text-reset text-primary-hover small"><%= admin.email %></a>
                                    <hr>
                                    <% } %>
                                </div>

                                 
                              
                                <ul class="nav nav-pills-primary-soft flex-column">
                                    <li class="nav-item">
                                        <a class="nav-link " href="/profile"><i class="bi bi-ticket-perforated fa-fw me-2"></i>Profile</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link active" href="/bookingdetails"><i class="bi bi-ticket-perforated fa-fw me-2"></i>Booking Details</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/userdetails"><i class="bi bi-ticket-perforated fa-fw me-2"></i>User Details</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/roomdetails"><i class="bi bi-ticket-perforated fa-fw me-2"></i>Room Status</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/userreview"><i class="bi bi-wallet fa-fw me-2"></i>Reviews</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/usermessage"><i class="bi bi-wallet fa-fw me-2"></i>User Messages</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/createroom"><i class="bi bi-wallet fa-fw me-2"></i>Create Rooms</a>
                                    </li>
                                  
                                    <li class="nav-item">
                                        <a class="nav-link" href="/updateroom"><i class="bi bi-wallet fa-fw me-2"></i>Update Rooms</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/bookingenquiry"><i class="bi bi-ticket-perforated fa-fw me-2"></i>Booking Enquiry</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/usergallery"><i class="bi bi-ticket-perforated fa-fw me-2"></i>User Gallery</a>
                                    </li>
                                  
                            </div>
                             
                        </div>
                    </div>
                </div>	
                     
            </div>
             

             
            <div class="col-lg-8 col-xl-9">

                 
                <div class="d-grid mb-0 d-lg-none w-100">
                    <button class="btn btn-primary mb-4" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar" aria-controls="offcanvasSidebar">
                        <i class="fas fa-sliders-h"></i> Menu
                    </button>
                </div>

                <div class="vstack gap-5">
                     
                  
                    <div class="card shadow-lg mt-5">
                        <!-- Card header START -->
                        <div class="card-header border-bottom">
                            <h5 class="card-header-title">Bookings</h5>
                        </div>
                        <!-- Card header END -->
                    
                        <!-- Card body START -->
                        <div class="card-body">
                            <% if(messages.error) { %>
              
                                <div class="alert alert-danger my-3" role="alert" id="error"> <%= messages.error %> </div>

                                  
                                <% } %>
                            <% if(messages.success) { %>
              
                                
                                <div class="alert alert-success" role="alert" id="error"> <%= messages.success %> </div>
                                  
                                <% } %>
                            <!-- Table head -->
                            <!-- <div class="bg-light rounded p-3"> -->
                                <!-- <div class="row row-cols-8 g-4">
                                    <div class="col  text-center align-items-center text-truncate"><h6 class="mb-0">Booked by</h6></div>
                                    <div class="col  text-center align-items-center text-truncate"><h6 class="mb-0">Check-in</h6></div>
                                    <div class="col  text-center align-items-center text-truncate"><h6 class="mb-0">Check-out</h6></div>
                                    <div class="col  text-center align-items-center text-truncate"><h6 class="mb-0">Guest</h6></div>
                                    <div class="col text-center align-items-center text-truncate"><h6 class="mb-0">Amount</h6></div>
                                    <div class="col text-center align-items-center text-truncate"><h6 class="mb-0">Payment</h6></div>
                                    <div class="col text-center align-items-center text-truncate"><h6 class="mb-0">Action</h6></div>
                                </div> -->
                                <% if (bookings && bookings.length > 0) { %>
                                  <% bookings.forEach(function(booking) { %>
                                
                            </div>
                                            
                            <!-- Table data -->
                            <div class="row row-cols-xl-8 align-items-lg-center justify-content-between border-bottom g-4 px-3 py-5">
                                    <div class="col text-center align-items-center">
                                        <hr class="my-1">
                                        <small class="d d-lg fw-bold">Booked By</small>
                                    
                                        <h6 class="mb-0 fw-normal">(Booking Id: <%= booking.bookingid %>)</h6>
                                        <h6 class="mb-0 fw-normal text-truncate">(<%= booking.roomtype %>)</h6>
                                        <h6 class="mb-0 fw-normal"><%= booking.username %></h6>
                                        <h6 class="mb-0 fw-normal"><%= booking.email %></h6>
                                      </div>
                                    <!-- Data item -->
                                    <div class="col text-center align-items-center">
                                      <hr class="d-lg my-1">
                                      <small class="d d-lg">Check-in:</small>
                                      <h6 class="mb-0 fw-normal text-truncate"><%= booking.checkin %></h6>
                                    </div>
                              
                                    <!-- Data item -->
                                    <div class="col text-center align-items-center">
                                      <hr class="d-lg my-1">
                                      <small class="d d-lg">Check-out:</small>
                                      <h6 class="mb-0 fw-normal text-truncate"><%= booking.checkout %></h6>
                                    </div>
                              
                                    <!-- Data item -->
                                    <div class="col text-center align-items-center">
                                      <hr class="d-lg my-1">
                                      <small class="d d-lg">Guests:</small>
                                      <h6 class="mb-0 fw-normal text-truncate"><%= booking.guests %></h6>
                                    </div>
                              
                                    <!-- Data item -->
                                    <div class="col text-center align-items-center">
                                      <hr class="d-lg my-1">
                                      <small class="d d-lg">Amount:</small>
                                      <h6 class="text-success mb-0 text-truncate"><%= booking.roomcost %></h6>
                                    </div>
                              
                                    <!-- Data item -->
                                    <div class="col text-center align-items-center ">
                                      <hr class="d-lg my-1">
                                      <small class="d d-lg">Payment:</small>
                                      <div class="badge bg-success bg-opacity-10 text-success text-truncate"><%= booking.payment %> </div>
                                    </div>
                              
                                    <!-- Data item -->

                                    <div class="col text-center align-items-center ">
                                        <form action="/update-booking-status" method="POST">  
                                            <div class="select-option">
                                                <label for="" class="text-truncate">Booking status</label>
                                              <select id="bookingstatus" name="bookingstatus">
                                                <% if (booking.bookingstatus === 'Confirmed') { %>
                                                  <option value="Confirmed" selected >Confirmed</option>
                                                  <option value="Pending">Pending</option>
                                                  <option value="Cancelled">Cancelled</option>
                                                <% } else if (booking.bookingstatus === 'Pending') { %>
                                                  <option value="Confirmed">Confirmed</option>
                                                  <option value="Pending" selected>Pending</option>
                                                  <option value="Cancelled">Cancelled</option>
                                                <% } else if (booking.bookingstatus === 'Cancelled') { %>
                                                  <option value="Confirmed">Confirmed</option>
                                                  <option value="Pending" >Pending</option>
                                                  <option value="Cancelled" selected>Cancelled</option>
                                                <% } %>
                                              </select>
                                            </div>
                                            <div class="select-option mt-2">
                                                <label for="" class="text-truncate">Room allotment</label>
                                              <select id="roomnumber" name="roomnumber">
                                                <% if (booking.roomnumber === 'Not allotted') { %>
                                                  <option value="Not allotted" selected >Not allotted</option>
                                                  <option value="101" >101</option>
                                                  <option value="102" >102</option>
                                                  <option value="103" >103</option>
                                                  <option value="104" >104</option>
                                                  <option value="105" >105</option>
                                                  <option value="201" >201</option>
                                                  <option value="202" >202</option>
                                                  <option value="203" >203</option>
                                                  <option value="204" >204</option>
                                                  <option value="205" >205</option>
                                                  <% } else if(booking.roomnumber === '101') { %>
                                                    <option value="Not allotted"  >Not allotted</option>
                                                    <option value="101"selected >101</option>
                                                    <option value="102" >102</option>
                                                    <option value="103" >103</option>
                                                    <option value="104" >104</option>
                                                    <option value="105" >105</option>
                                                    <option value="201" >201</option>
                                                    <option value="202" >202</option>
                                                    <option value="203" >203</option>
                                                    <option value="204" >204</option>
                                                    <option value="205" >205</option>
                                                    <% } else if(booking.roomnumber === '102') { %>
                                                        <option value="Not allotted"  >Not allotted</option>
                                                        <option value="101" >101</option>
                                                        <option value="102" selected >102</option>
                                                    <option value="103" >103</option>
                                                    <option value="104" >104</option>
                                                    <option value="105" >105</option>
                                                    <option value="201" >201</option>
                                                    <option value="202" >202</option>
                                                    <option value="203" >203</option>
                                                    <option value="204" >204</option>
                                                    <option value="205" >205</option>
                                                    <% } else if(booking.roomnumber === '103') { %>
                                                        <option value="Not allotted"  >Not allotted</option>
                                                        <option value="101" >101</option>
                                                        <option value="102"  >102</option>
                                                    <option value="103" selected >103</option>
                                                    <option value="104" >104</option>
                                                    <option value="105" >105</option>
                                                    <option value="201" >201</option>
                                                    <option value="202" >202</option>
                                                    <option value="203" >203</option>
                                                    <option value="204" >204</option>
                                                    <option value="205" >205</option>
                                                    <% } else if(booking.roomnumber === '104') { %>
                                                        <option value="Not allotted"  >Not allotted</option>
                                                        <option value="101" >101</option>
                                                        <option value="102"  >102</option>
                                                    <option value="103"  >103</option>
                                                    <option value="104" selected >104</option>
                                                    <option value="105" >105</option>
                                                    <option value="201" >201</option>
                                                    <option value="202" >202</option>
                                                    <option value="203" >203</option>
                                                    <option value="204" >204</option>
                                                    <option value="205" >205</option>
                                                    <% } else if(booking.roomnumber === '105') { %>
                                                        <option value="Not allotted"  >Not allotted</option>
                                                        <option value="101" >101</option>
                                                        <option value="102"  >102</option>
                                                    <option value="103"  >103</option>
                                                    <option value="104" >104</option>
                                                    <option value="105" selected >105</option>
                                                    <option value="201" >201</option>
                                                    <option value="202" >202</option>
                                                    <option value="203" >203</option>
                                                    <option value="204" >204</option>
                                                    <option value="205" >205</option>
                                                    <% } else if(booking.roomnumber === '201') { %>
                                                        <option value="Not allotted"  >Not allotted</option>
                                                        <option value="101" >101</option>
                                                        <option value="102"  >102</option>
                                                    <option value="103"  >103</option>
                                                    <option value="104"  >104</option>
                                                    <option value="105" >105</option>
                                                    <option value="201" selected>201</option>
                                                    <option value="202" >202</option>
                                                    <option value="203" >203</option>
                                                    <option value="204" >204</option>
                                                    <option value="205" >205</option>
                                                    <% } else if(booking.roomnumber === '202') { %>
                                                        <option value="Not allotted"  >Not allotted</option>
                                                        <option value="101" >101</option>
                                                        <option value="102"  >102</option>
                                                    <option value="103"  >103</option>
                                                    <option value="104" selected >104</option>
                                                    <option value="105" >105</option>
                                                    <option value="201" >201</option>
                                                    <option value="202" selected >202</option>
                                                    <option value="203" >203</option>
                                                    <option value="204" >204</option>
                                                    <option value="205" >205</option>
                                                    <% } else if(booking.roomnumber === '203') { %>
                                                        <option value="Not allotted"  >Not allotted</option>
                                                        <option value="101" >101</option>
                                                        <option value="102"  >102</option>
                                                    <option value="103"  >103</option>
                                                    <option value="104"  >104</option>
                                                    <option value="105" >105</option>
                                                    <option value="201" >201</option>
                                                    <option value="202" >202</option>
                                                    <option value="203" selected>203</option>
                                                    <option value="204" >204</option>
                                                    <option value="205" >205</option>
                                                    <% } else if(booking.roomnumber === '204') { %>
                                                        <option value="Not allotted"  >Not allotted</option>
                                                        <option value="101" >101</option>
                                                        <option value="102"  >102</option>
                                                    <option value="103"  >103</option>
                                                    <option value="104"  >104</option>
                                                    <option value="105" >105</option>
                                                    <option value="201" >201</option>
                                                    <option value="202" >202</option>
                                                    <option value="203" >203</option>
                                                    <option value="204" selected >204</option>
                                                    <option value="205" >205</option>
                                                    <% } else if(booking.roomnumber === '205') { %>
                                                        <option value="Not allotted"  >Not allotted</option>
                                                        <option value="101" >101</option>
                                                        <option value="102"  >102</option>
                                                    <option value="103"  >103</option>
                                                    <option value="104"  >104</option>
                                                    <option value="105" >105</option>
                                                    <option value="201" >201</option>
                                                    <option value="202" >202</option>
                                                    <option value="203" >203</option>
                                                    <option value="204" >204</option>
                                                    <option value="205" selected >205</option>
                                                    <% } %>
                                              </select>
                                            </div>
                                            <div class="col text-center align-items-center">
                                              <input type="hidden" name="updateDetails" value="true">
                                              <input type="hidden" name="bookingid" value="<%= booking.bookingid %>">
                                              <button type="submit" class="btn btn-primary mt-2 mb-1" style="padding: 0.25rem 0.5rem; font-size: 0.875rem;">Update</button>                                            </div>
                                          </form>
                                        </div>
                                        <% }); %>
                                    <% } else { %>
                                        <p>No bookings found.</p>
                                    <% } %>
                        </div>
                  
                    </div>
             

                </div>
            </div>
            </div>
            
            
</section>